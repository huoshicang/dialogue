"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[944],{9944:function(e,l,a){a.r(l),a.d(l,{default:function(){return F}});var t=a(6768),o=a(4232),i=a(144);const d={id:"modelFrom"};var u=(0,t.pM)({__name:"ModelFrom",props:{loading:{type:Boolean,default:!1}},emits:["setLoading","setData","setVisible"],setup(e,{emit:l}){const a=(0,i.Kh)({}),o=l,u=e,n=async({errors:e,values:l})=>{if(!u.loading&&!e){o("setLoading",!0);try{console.log("搜索成功"),o("setData",[])}catch(a){console.log("搜索失败")}finally{o("setLoading",!1)}}};return(e,l)=>{const i=(0,t.g2)("a-button"),u=(0,t.g2)("a-space"),r=(0,t.g2)("a-form-item"),m=(0,t.g2)("a-form");return(0,t.uX)(),(0,t.CE)("div",d,[(0,t.bF)(m,{model:a,layout:"inline",onSubmit:n},{default:(0,t.k6)((()=>[(0,t.bF)(r,null,{default:(0,t.k6)((()=>[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[(0,t.bF)(i,{"html-type":"submit",disabled:""},{default:(0,t.k6)((()=>l[1]||(l[1]=[(0,t.eW)("搜索")]))),_:1}),(0,t.bF)(i,{onClick:l[0]||(l[0]=e=>o("setVisible",{visible:!0,title:"新建模型"}))},{default:(0,t.k6)((()=>l[2]||(l[2]=[(0,t.eW)(" 新建 ")]))),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])}}}),n=a(1241);const r=(0,n.A)(u,[["__scopeId","data-v-78d3aa72"]]);var m=r,s=a(3124),_=a(1245),c=a(2426);const b={id:"modelModal"};var g=(0,t.pM)({__name:"ModelModal",props:{modalVisible:{type:Object,required:!0,default:{visible:!1,title:null}},modelInfo:{type:Object,required:!0,default:{user_name:"",base_url:"",model_name:"",model_call:"",model_introduction:"",Model_tag:[],model_call_input:0,model_call_output:0,limit:0,residue_limit:0}}},emits:["setVisible","requestData"],setup(e,{emit:l}){const a=(0,c.k)().user_info,d=e,u=["文本生成","视频理解","视频生成","图片处理","图片理解","图片生成","向量模型","语音合成","语音识别"],n=l,r=(0,i.Kh)({base_url:"",Model_name:"",Model_call:"",Model_introduction:"",Model_tag:[],Model_call_input:null,Model_call_output:null,limit:null,residue_limit:null,enable:!1,charging:!1}),m={base_url:[{type:"url",required:!0,message:"Base url 不可为空"}],Model_name:[{required:!0,message:"模型名 不可为空"}],Model_call:[{required:!0,message:"模型调用名 不可为空"}],Model_introduction:[{required:!1}],Model_call_input:[{required:!0,message:"模型输入计费 不可为空"}],Model_call_output:[{required:!0,message:"模型输出计费 不可为空"}],limit:[{required:!0,message:"可用额度 不可为空"}],residue_limit:[{required:!0,message:"剩余额度 不可为空"}]},g=async({errors:e,values:l})=>{if(d.modalVisible.visible&&!e){n("setVisible",d.modalVisible.visible);try{l.user_name=a.username,l.user_id=a._id;const e=await s.j.add_model(l);200===e.status_code?(_.A.success(e.message),n("requestData")):_.A.error(e.message)}catch(t){console.log("添加失败")}finally{n("setVisible",{visible:!1,title:null})}}};return(0,t.nT)((()=>{if(d.modalVisible.visible)switch(d.modalVisible.title){case"新建模型":r.base_url="",r.Model_name="",r.Model_call="",r.Model_introduction="",r.Model_tag=[],r.Model_call_input=null,r.Model_call_output=null,r.limit=null,r.residue_limit=null,r.enable=!0,r.charging=!0;break;case"编辑模型":r.base_url=d.modelInfo.base_url,r.Model_name=d.modelInfo.model_name,r.Model_call=d.modelInfo.model_call,r.Model_introduction=d.modelInfo.model_introduction,r.Model_tag=d.modelInfo.model_tag,r.Model_call_input=d.modelInfo.model_call_input,r.Model_call_output=d.modelInfo.model_call_output,r.limit=d.modelInfo.limit,r.residue_limit=d.modelInfo.residue_limit,r.enable=d.modelInfo.enable,r.charging=d.modelInfo.charging;break;default:break}})),(e,l)=>{const a=(0,t.g2)("a-input"),i=(0,t.g2)("a-form-item"),n=(0,t.g2)("a-textarea"),s=(0,t.g2)("a-option"),_=(0,t.g2)("a-select"),c=(0,t.g2)("a-input-number"),p=(0,t.g2)("a-switch"),f=(0,t.g2)("a-button"),v=(0,t.g2)("a-form"),k=(0,t.g2)("a-modal");return(0,t.uX)(),(0,t.CE)("div",b,[(0,t.bF)(k,{width:"auto",visible:d.modalVisible.visible,"onUpdate:visible":l[11]||(l[11]=e=>d.modalVisible.visible=e),footer:!1},{title:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(d.modalVisible.title),1)])),default:(0,t.k6)((()=>[(0,t.bF)(v,{ref:"formRef",rules:m,style:{width:"600px"},model:r,onSubmit:g},{default:(0,t.k6)((()=>[(0,t.bF)(i,{field:"base_url",label:"Base url","validate-trigger":"blur"},{default:(0,t.k6)((()=>[(0,t.bF)(a,{modelValue:r.base_url,"onUpdate:modelValue":l[0]||(l[0]=e=>r.base_url=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(i,{field:"Model_name",label:"模型名","validate-trigger":"blur"},{default:(0,t.k6)((()=>[(0,t.bF)(a,{modelValue:r.Model_name,"onUpdate:modelValue":l[1]||(l[1]=e=>r.Model_name=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(i,{field:"Model_call",label:"模型调用名","validate-trigger":"blur"},{default:(0,t.k6)((()=>[(0,t.bF)(a,{modelValue:r.Model_call,"onUpdate:modelValue":l[2]||(l[2]=e=>r.Model_call=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(i,{field:"Model_introduction",label:"模型描述","validate-trigger":"blur"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{"model-value":r.Model_introduction,"onUpdate:modelValue":l[3]||(l[3]=e=>r.Model_introduction=e),"auto-size":{maxRows:4,minRows:1},"allow-clear":"","show-word-limit":""},null,8,["model-value"])])),_:1}),(0,t.bF)(i,{field:"Model_tag",label:"模型标签","validate-trigger":"blur"},{default:(0,t.k6)((()=>[(0,t.bF)(_,{"model-value":r.Model_tag,"onUpdate:modelValue":l[4]||(l[4]=e=>r.Model_tag=e),placeholder:"请选择模型","allow-clear":"",multiple:""},{default:(0,t.k6)((()=>[((0,t.uX)(),(0,t.CE)(t.FK,null,(0,t.pI)(u,((e,l)=>(0,t.bF)(s,{key:l},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e),1)])),_:2},1024))),64))])),_:1},8,["model-value"])])),_:1}),(0,t.bF)(i,{field:"Model_call_input",label:"模型输入计费"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:r.Model_call_input,"onUpdate:modelValue":l[5]||(l[5]=e=>r.Model_call_input=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(i,{field:"Model_call_output",label:"模型输出计费"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:r.Model_call_output,"onUpdate:modelValue":l[6]||(l[6]=e=>r.Model_call_output=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(i,{field:"limit",label:"总额度"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:r.limit,"onUpdate:modelValue":l[7]||(l[7]=e=>r.limit=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(i,{field:"residue_limit",label:"剩余额度"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:r.residue_limit,"onUpdate:modelValue":l[8]||(l[8]=e=>r.residue_limit=e)},null,8,["modelValue"])])),_:1}),"编辑模型"===d.modalVisible.title?((0,t.uX)(),(0,t.Wv)(i,{key:0,field:"enable",label:"是否启用"},{default:(0,t.k6)((()=>[(0,t.bF)(p,{modelValue:r.enable,"onUpdate:modelValue":l[9]||(l[9]=e=>r.enable=e)},null,8,["modelValue"])])),_:1})):(0,t.Q3)("",!0),"编辑模型"===d.modalVisible.title?((0,t.uX)(),(0,t.Wv)(i,{key:1,field:"charging",label:"是否进行计费"},{default:(0,t.k6)((()=>[(0,t.bF)(p,{modelValue:r.charging,"onUpdate:modelValue":l[10]||(l[10]=e=>r.charging=e)},null,8,["modelValue"])])),_:1})):(0,t.Q3)("",!0),(0,t.bF)(f,{type:"primary","html-type":"submit"},{default:(0,t.k6)((()=>l[12]||(l[12]=[(0,t.eW)(" 确认")]))),_:1})])),_:1},8,["model"])])),_:1},8,["visible"])])}}});const p=(0,n.A)(g,[["__scopeId","data-v-0438cc61"]]);var f=p,v=a(1387);const k={id:"modelIndex"};var M=(0,t.pM)({__name:"ModelIndex",setup(e){(0,v.rd)();const l=(0,c.k)().user_info,a=[{title:"创建人",dataIndex:"user_name",slotName:"user_name",width:60,align:"center"},{title:"模型名",dataIndex:"model_name",ellipsis:!0,tooltip:!0,width:90,align:"center"},{title:"调用名",dataIndex:"model_call",ellipsis:!0,tooltip:!0,width:90,align:"center"},{title:"Base URL",dataIndex:"base_url",ellipsis:!0,tooltip:!0,width:100,align:"center"},{title:"输入",dataIndex:"model_call_input",width:50,align:"center"},{title:"输出",dataIndex:"model_call_output",width:50,align:"center"},{title:"额度",slotName:"limit",width:120,align:"center"},{title:"计费",slotName:"charging",width:50,align:"center"},{title:"状态",slotName:"enable",width:50,align:"center"},{title:"描述",dataIndex:"model_introduction",ellipsis:!0,tooltip:!0,width:100,align:"center"},{title:"标签",slotName:"modelTag",align:"center",width:110},{title:"操作",slotName:"optional",width:60,align:"center"}],d=(0,i.KR)([]),u=(0,i.KR)(!0),n=(0,i.KR)({visible:!1,title:null}),r=(0,i.KR)({user_name:"",base_url:"",model_name:"",model_call:"",model_introduction:"",model_call_input:0,model_call_output:0,limit:0,residue_limit:0,charging:null,enable:null}),b=e=>{u.value=e},g=e=>{d.value=e},p=e=>{n.value.visible=e.visible,n.value.title=e.title},M=e=>{"编辑"===e.value&&p({visible:!0,title:"编辑模型"})},V=e=>{r.value.user_name=e.user_name,r.value.base_url=e.base_url,r.value.model_name=e.model_name,r.value.model_call=e.model_call,r.value.model_introduction=e.model_introduction,r.value.model_call_input=e.model_call_input,r.value.model_call_output=e.model_call_output,r.value.limit=e.limit,r.value.residue_limit=e.residue_limit,r.value.charging=e.charging,r.value.enable=e.enable},F=async()=>{try{const e=await s.j.get_model_table({user_id:l._id,user_name:l.username,user_role:l.role});200===e.status_code?(g(e.data),_.A.success(e.message)):_.A.error(e.message)}catch(e){console.log("模型获取失败")}finally{u.value=!1}};return(0,t.sV)((()=>{F()})),(e,l)=>{const i=(0,t.g2)("a-tag"),s=(0,t.g2)("a-space"),_=(0,t.g2)("a-button"),c=(0,t.g2)("a-doption"),v=(0,t.g2)("a-dropdown"),h=(0,t.g2)("a-table");return(0,t.uX)(),(0,t.CE)("div",k,[(0,t.bF)(m,{onSetLoading:b,onSetData:g,onSetVisible:p,loading:u.value},null,8,["loading"]),(0,t.bF)(h,{columns:a,data:d.value,loading:u.value,scroll:{x:2e3}},{user_name:(0,t.k6)((({record:e})=>[(0,t.bF)(i,{size:"large"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.user_name),1)])),_:2},1024)])),charging:(0,t.k6)((({record:e})=>[e.charging?((0,t.uX)(),(0,t.Wv)(i,{key:0,color:"green"},{default:(0,t.k6)((()=>l[2]||(l[2]=[(0,t.eW)("启用")]))),_:1})):((0,t.uX)(),(0,t.Wv)(i,{key:1,color:"red"},{default:(0,t.k6)((()=>l[3]||(l[3]=[(0,t.eW)("禁用")]))),_:1}))])),enable:(0,t.k6)((({record:e})=>[e.enable?((0,t.uX)(),(0,t.Wv)(i,{key:0,color:"green"},{default:(0,t.k6)((()=>l[4]||(l[4]=[(0,t.eW)("启用")]))),_:1})):((0,t.uX)(),(0,t.Wv)(i,{key:1,color:"red"},{default:(0,t.k6)((()=>l[5]||(l[5]=[(0,t.eW)("禁用")]))),_:1}))])),limit:(0,t.k6)((({record:e})=>[(0,t.eW)((0,o.v_)(e.limit)+"/"+(0,o.v_)(e.residue_limit),1)])),modelTag:(0,t.k6)((({record:e})=>[(0,t.bF)(s,{wrap:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.model_tag,((e,l)=>((0,t.uX)(),(0,t.Wv)(i,{key:l},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e),1)])),_:2},1024)))),128))])),_:2},1024)])),optional:(0,t.k6)((({record:e})=>[(0,t.bF)(v,{onSelect:M},{content:(0,t.k6)((()=>[(0,t.bF)(c,{value:{value:"编辑"},onClick:l=>V({...e})},{default:(0,t.k6)((()=>l[7]||(l[7]=[(0,t.eW)("编辑 ")]))),_:2},1032,["onClick"]),(0,t.bF)(c,{value:{value:"删除"}},{default:(0,t.k6)((()=>l[8]||(l[8]=[(0,t.eW)("删除")]))),_:1})])),default:(0,t.k6)((()=>[(0,t.bF)(_,null,{default:(0,t.k6)((()=>l[6]||(l[6]=[(0,t.eW)("操作")]))),_:1})])),_:2},1024)])),_:1},8,["data","loading"]),(0,t.bF)(f,{modalVisible:n.value,"onUpdate:modalVisible":l[0]||(l[0]=e=>n.value=e),modelInfo:r.value,"onUpdate:modelInfo":l[1]||(l[1]=e=>r.value=e),onSetVisible:p,onRequestData:F},null,8,["modalVisible","modelInfo"])])}}});const V=(0,n.A)(M,[["__scopeId","data-v-20de8493"]]);var F=V}}]);
//# sourceMappingURL=944.59a06f2f.js.map